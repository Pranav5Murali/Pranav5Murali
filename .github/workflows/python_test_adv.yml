name: Run Python Script Advanced

on: 
  workflow_dispatch:

jobs:
  deploy:
    runs-on: self-hosted
    environment: ubuntu1

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Print current directory and contents
      shell: cmd
      run: |
        echo "Current directory:"
        cd
        dir

    - name: Set permissions on the Python script
      shell: cmd
      run: |
        echo "Setting permissions on execute_remote.py..."
        icacls execute_remote.py /grant Everyone:F

    - name: Run Python script using cmd
      shell: cmd
      env:
        UBUNTU1: ${{ secrets.UBUNTU1 }}
      run: |
        echo "Running Python script using cmd..."
        cd "${{ github.workspace }}"
        "C:\Users\Pranav\AppData\Local\Programs\Python\Python38\python.exe" execute_remote.py
